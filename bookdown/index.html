<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Introduction | _main.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.11.1 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Introduction | _main.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Introduction | _main.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="02_auth_strategies.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#what-is-sealr"><i class="fa fa-check"></i><b>1.1</b> What is sealr?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-are-authentication-and-authorization"><i class="fa fa-check"></i><b>1.2</b> What are authentication and authorization?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#authenticating-users"><i class="fa fa-check"></i><b>1.2.1</b> Authenticating users</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#authorizing-users"><i class="fa fa-check"></i><b>1.2.2</b> Authorizing users</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#implementation"><i class="fa fa-check"></i><b>1.3</b> Implementation</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#overview"><i class="fa fa-check"></i><b>1.3.1</b> Overview</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#authenticate"><i class="fa fa-check"></i><b>1.3.2</b> authenticate</a></li>
<li class="chapter" data-level="1.3.3" data-path="index.html"><a href="index.html#is_authed-functions"><i class="fa fa-check"></i><b>1.3.3</b> is_authed functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html"><i class="fa fa-check"></i><b>2</b> Strategies</a><ul>
<li class="chapter" data-level="2.1" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#json-web-tokens-jwt"><i class="fa fa-check"></i><b>2.1</b> JSON Web Tokens (JWT)</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#introduction-1"><i class="fa fa-check"></i><b>2.1.1</b> Introduction</a></li>
<li class="chapter" data-level="2.1.2" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#simple-example"><i class="fa fa-check"></i><b>2.1.2</b> Simple Example</a></li>
<li class="chapter" data-level="2.1.3" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#claims-example"><i class="fa fa-check"></i><b>2.1.3</b> Claims Example</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#open-id-connect---google"><i class="fa fa-check"></i><b>2.2</b> Open ID Connect - Google</a><ul>
<li class="chapter" data-level="2.2.1" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#introduction-2"><i class="fa fa-check"></i><b>2.2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2.2" data-path="02_auth_strategies.html"><a href="02_auth_strategies.html#example"><i class="fa fa-check"></i><b>2.2.2</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03_storage.html"><a href="03_storage.html"><i class="fa fa-check"></i><b>3</b> Exchanging and storing tokens</a><ul>
<li class="chapter" data-level="3.1" data-path="03_storage.html"><a href="03_storage.html#exchanging-tokens"><i class="fa fa-check"></i><b>3.1</b> Exchanging tokens</a><ul>
<li class="chapter" data-level="3.1.1" data-path="03_storage.html"><a href="03_storage.html#issueing-the-token"><i class="fa fa-check"></i><b>3.1.1</b> Issueing the token</a></li>
<li class="chapter" data-level="3.1.2" data-path="03_storage.html"><a href="03_storage.html#cookie"><i class="fa fa-check"></i><b>3.1.2</b> Cookie</a></li>
<li class="chapter" data-level="3.1.3" data-path="03_storage.html"><a href="03_storage.html#http-authorization-header"><i class="fa fa-check"></i><b>3.1.3</b> HTTP Authorization header</a></li>
<li class="chapter" data-level="3.1.4" data-path="03_storage.html"><a href="03_storage.html#interactive-r-session"><i class="fa fa-check"></i><b>3.1.4</b> Interactive R session</a></li>
<li class="chapter" data-level="3.1.5" data-path="03_storage.html"><a href="03_storage.html#another-application"><i class="fa fa-check"></i><b>3.1.5</b> Another application</a></li>
<li class="chapter" data-level="3.1.6" data-path="03_storage.html"><a href="03_storage.html#web-application"><i class="fa fa-check"></i><b>3.1.6</b> Web application</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03_storage.html"><a href="03_storage.html#local-storage"><i class="fa fa-check"></i><b>3.2</b> Local Storage</a></li>
<li class="chapter" data-level="3.3" data-path="03_storage.html"><a href="03_storage.html#cookie-1"><i class="fa fa-check"></i><b>3.3</b> Cookie</a><ul>
<li class="chapter" data-level="3.3.1" data-path="03_storage.html"><a href="03_storage.html#cookie-example"><i class="fa fa-check"></i><b>3.3.1</b> Cookie example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04_security.html"><a href="04_security.html"><i class="fa fa-check"></i><b>4</b> Security</a><ul>
<li class="chapter" data-level="4.1" data-path="04_security.html"><a href="04_security.html#https"><i class="fa fa-check"></i><b>4.1</b> HTTPS</a></li>
<li class="chapter" data-level="4.2" data-path="04_security.html"><a href="04_security.html#cookies-and-csrf"><i class="fa fa-check"></i><b>4.2</b> Cookies and CSRF</a></li>
<li class="chapter" data-level="4.3" data-path="04_security.html"><a href="04_security.html#local-storage-and-xss"><i class="fa fa-check"></i><b>4.3</b> Local storage and XSS</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<div id="what-is-sealr" class="section level2">
<h2><span class="header-section-number">1.1</span> What is sealr?</h2>
<p>sealr aims to facilitate implementing authentication and authorization for plumber APIs. Plumber is an R package that allows you to quickly generate an API (Application Programming Interface) from
your R code. You can read more about plumber on its <a href="https://www.rplumber.io/">website</a> and in its <a href="https://www.rplumber.io/docs">docs</a>.</p>
</div>
<div id="what-are-authentication-and-authorization" class="section level2">
<h2><span class="header-section-number">1.2</span> What are authentication and authorization?</h2>
<p>Authentication and authorization are two concepts from cybersecurity.</p>
<blockquote>
<p>“Authentication is the process of determining whether someone or something is, in fact, who or what it declares itself to be. Authentication technology provides access control for systems by checking to see if a user’s credentials match the credentials in a database of authorized users or in a data authentication server.”
<a href="https://searchsoftwarequality.techtarget.com/definition/authentication">Source</a></p>
</blockquote>
<blockquote>
<p>“Authorization is the process of giving someone permission to do or have something.”
<a href="https://searchsoftwarequality.techtarget.com/definition/authorization">Source</a></p>
</blockquote>
<p>Another, less formal way to define the terms: authentication is about who you are, authorization is about what you’re allowed to do.</p>
<p>In either way, you have certainly encountered both authentication and authorization in your online life. Whenever you log in to a service using your username and password, you are <em>authenticating</em> yourself to use the service. When you give a third party app access to your google account, for example to read your calendar, you are <em>authorizing</em> the app to do so.</p>
<p>So why would you need authentication or authorization for your API?</p>
<p>Here are two use cases that come to mind:</p>
<ul>
<li>you want to deploy your API at your company but do not want to give everyone access to every endpoint.</li>
<li>you want to make your API publicly available on the Internet but you still want users to authenticate before they can use your API (e.g. to prohibit abuse of your API).</li>
</ul>
<p>But there might be even more scenarios, depending on your specific use case, company guidelines, security considerations etc.</p>
<div id="authenticating-users" class="section level3">
<h3><span class="header-section-number">1.2.1</span> Authenticating users</h3>
<p>Authentication flow - coming soon</p>
<p>flowchart</p>
</div>
<div id="authorizing-users" class="section level3">
<h3><span class="header-section-number">1.2.2</span> Authorizing users</h3>
</div>
</div>
<div id="implementation" class="section level2">
<h2><span class="header-section-number">1.3</span> Implementation</h2>
<div id="overview" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Overview</h3>
<p><em>sealr</em> aims to add authentication / authorization strategies to plumber. So far, sealr’ functionality only covers
<em>checking</em> incoming requests for correct authentication details. It does not include functions for providing users with credentials in the first place as this is very specific to the use case. However, we provide several examples that are discussed in the relevant subsections of this book. The R scripts can be found on GitHub (MISSING LINK TO EXAMPLES FOLDER!).</p>
<p>The primary logic of <em>sealr</em> is based on plumber filters.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
“Plumber filters can be used to define a “pipeline” for handling incoming requests" (<a href="https://www.rplumber.io/docs/routing-and-input.html#filters">Plumber docs</a>). So if your plumber API receives a request, the request will first be routed through the different filters before
it “arrives” at its destination endpoint.</p>
<p>The idea of <em>sealr</em> is to use a filter for authentication/authorization. If a request is not properly authenticated / authorized, <em>sealr</em> will immediately return a “401 - Authentication failed.” error from the filter to the user. In this way, an unauthenticated / unauthorized request will not “reach” its destination endpoint and unauthorized/unauthenticated users will not be able to access your API.</p>
</div>
<div id="authenticate" class="section level3">
<h3><span class="header-section-number">1.3.2</span> authenticate</h3>
<p><em>sealr</em>’s main function is the <code>authenticate</code> function. It is supposed to be used within a plumber filter. <code>authenticate</code> takes a
<code>is_authed_*</code> function (see below) as input and depending on the output of this “checker” function,
takes action:</p>
<ul>
<li>if the request is authenticated / authorized, it forwards to the next plumber handler using <code>plumber::forward</code>.</li>
<li>if the request is not authenticated / authorized, it <code>return</code>s to the user, passing forward HTTP status code, description and message from the output of the <code>is_authed_</code> function. Most often, this will be a “401 - Authentication failed.” error.</li>
</ul>
<p>For example:</p>
<pre class="sourceCode r"><code class="sourceCode r">pr<span class="op">$</span><span class="kw">filter</span>(<span class="st">&quot;sealr-jwt&quot;</span>, <span class="cf">function</span> (req, res) {
  <span class="co"># simply call the strategy and forward the request and response</span>
  sealr<span class="op">::</span><span class="kw">authenticate</span>(<span class="dt">req =</span> req, <span class="dt">res =</span> res, <span class="dt">is_authed_fun =</span> sealr<span class="op">::</span>is_authed_jwt,
                      <span class="dt">token_location =</span> <span class="st">&quot;header&quot;</span>, <span class="dt">secret =</span> secret)
})</code></pre>
<p>The <em>actions</em> described above that sealr takes are not visible in the high-level code. You can check the <a href="https://github.com/jandix/sealr/blob/master/R/authenticate.R">source code</a> for <code>authenticate</code> to see the implementation</p>
<p>By accepting a function object as argument, <code>authenticate</code> is quite flexible: You can even pass your own <code>is_authed</code> function. See the examples section of <code>?sealr::authenticate</code> for a simple example.</p>
</div>
<div id="is_authed-functions" class="section level3">
<h3><span class="header-section-number">1.3.3</span> is_authed functions</h3>
<p>The functions starting with <code>is_authed</code> provide the actual implementations of the
different authentication / authorization strategies that <em>sealr</em> aims to provide.
Currently implemented are:</p>
<ul>
<li><code>is_authed_jwt</code>: implements JSON Web Token verification and checking.</li>
<li><code>is_authed_oauth2_google</code>: implements Google’s OpenID Connect (which is based on OAuth2.0)</li>
</ul>
<p><code>is_authed_*</code> functions return a list with the following elements:</p>
<ul>
<li><code>is_authed</code>: TRUE or FALSE. Result of the check whether the request is authenticated / authorized.</li>
<li><code>status</code>: character. Optional (typically only set if <code>is_authed</code> is FALSE). Short description of HTTP status code.</li>
<li><code>code</code>: integer. Optional (typically only set if <code>is_authed</code> is FALSE). HTTP status code.</li>
<li><code>message</code>: character. Optional (typically only set if <code>is_authed</code> is FALSE). Longer description.</li>
</ul>
<p>Usage of the <code>is_authed</code> functions is not restricted to plumber filters. For example,
you can use an <code>is_authed</code> function at the top of an endpoint to restrict access to certain endpoints or use
different authorization “levels” for different endpoints. This is particularly relevant if you have more than two “levels” of authorization (see the <a href="https://jandix.github.io/sealr/docs/jwt/jwt_claims_example/">claims example</a>).</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Though, you can use sealr functionality without filters as well by using the <code>is_authed</code> functions directly.<a href="index.html#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="02_auth_strategies.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
