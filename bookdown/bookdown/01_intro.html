<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 sealr | sealr.utf8.md</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="1 sealr | sealr.utf8.md" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 sealr | sealr.utf8.md" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="02_auth_providers.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="01_intro.html"><a href="01_intro.html"><i class="fa fa-check"></i><b>1</b> sealr</a><ul>
<li class="chapter" data-level="1.1" data-path="01_intro.html"><a href="01_intro.html#plumber"><i class="fa fa-check"></i><b>1.1</b> plumber</a></li>
<li class="chapter" data-level="1.2" data-path="01_intro.html"><a href="01_intro.html#sealr-1"><i class="fa fa-check"></i><b>1.2</b> sealr</a></li>
<li class="chapter" data-level="1.3" data-path="01_intro.html"><a href="01_intro.html#using-plumber-filters-for-auth"><i class="fa fa-check"></i><b>1.3</b> Using plumber filters for auth</a><ul>
<li class="chapter" data-level="1.3.1" data-path="01_intro.html"><a href="01_intro.html#authenticate"><i class="fa fa-check"></i><b>1.3.1</b> authenticate</a></li>
<li class="chapter" data-level="1.3.2" data-path="01_intro.html"><a href="01_intro.html#is_authed-functions"><i class="fa fa-check"></i><b>1.3.2</b> is_authed functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02_auth_providers.html"><a href="02_auth_providers.html"><i class="fa fa-check"></i><b>2</b> Implementing Authentication and Authorization</a><ul>
<li class="chapter" data-level="2.1" data-path="02_auth_providers.html"><a href="02_auth_providers.html#authentication"><i class="fa fa-check"></i><b>2.1</b> Authentication</a><ul>
<li class="chapter" data-level="2.1.1" data-path="02_auth_providers.html"><a href="02_auth_providers.html#custom"><i class="fa fa-check"></i><b>2.1.1</b> Custom</a></li>
<li class="chapter" data-level="2.1.2" data-path="02_auth_providers.html"><a href="02_auth_providers.html#third-party"><i class="fa fa-check"></i><b>2.1.2</b> Third party</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02_auth_providers.html"><a href="02_auth_providers.html#authorization"><i class="fa fa-check"></i><b>2.2</b> Authorization</a></li>
<li class="chapter" data-level="2.3" data-path="02_auth_providers.html"><a href="02_auth_providers.html#json-web-tokens-jwt"><i class="fa fa-check"></i><b>2.3</b> JSON Web Tokens (JWT)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03_storage.html"><a href="03_storage.html"><i class="fa fa-check"></i><b>3</b> Storage of Tokens</a><ul>
<li class="chapter" data-level="3.1" data-path="03_storage.html"><a href="03_storage.html#cookie"><i class="fa fa-check"></i><b>3.1</b> Cookie</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04_examples.html"><a href="04_examples.html"><i class="fa fa-check"></i><b>4</b> Examples</a><ul>
<li class="chapter" data-level="4.1" data-path="04_examples.html"><a href="04_examples.html#jwt-simple-example"><i class="fa fa-check"></i><b>4.1</b> JWT Simple Example</a></li>
<li class="chapter" data-level="4.2" data-path="04_examples.html"><a href="04_examples.html#cookie-example"><i class="fa fa-check"></i><b>4.2</b> Cookie Example</a><ul>
<li class="chapter" data-level="4.2.1" data-path="04_examples.html"><a href="04_examples.html#run-the-example"><i class="fa fa-check"></i><b>4.2.1</b> Run the example</a></li>
<li class="chapter" data-level="4.2.2" data-path="04_examples.html"><a href="04_examples.html#route-without-required-authentication"><i class="fa fa-check"></i><b>4.2.2</b> Route without required authentication</a></li>
<li class="chapter" data-level="4.2.3" data-path="04_examples.html"><a href="04_examples.html#route-with-required-authentication"><i class="fa fa-check"></i><b>4.2.3</b> Route with required authentication</a></li>
<li class="chapter" data-level="4.2.4" data-path="04_examples.html"><a href="04_examples.html#code-code"><i class="fa fa-check"></i><b>4.2.4</b> Code {code}</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04_examples.html"><a href="04_examples.html#jwt-claims-example"><i class="fa fa-check"></i><b>4.3</b> JWT Claims Example</a><ul>
<li class="chapter" data-level="4.3.1" data-path="04_examples.html"><a href="04_examples.html#run-the-example-1"><i class="fa fa-check"></i><b>4.3.1</b> Run the example</a></li>
<li class="chapter" data-level="4.3.2" data-path="04_examples.html"><a href="04_examples.html#code"><i class="fa fa-check"></i><b>4.3.2</b> Code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05_security.html"><a href="05_security.html"><i class="fa fa-check"></i><b>5</b> Security</a><ul>
<li class="chapter" data-level="5.1" data-path="05_security.html"><a href="05_security.html#r-markdown"><i class="fa fa-check"></i><b>5.1</b> R Markdown</a></li>
<li class="chapter" data-level="5.2" data-path="05_security.html"><a href="05_security.html#including-plots"><i class="fa fa-check"></i><b>5.2</b> Including Plots</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="sealr" class="section level1">
<h1><span class="header-section-number">1</span> sealr</h1>
<div id="plumber" class="section level2">
<h2><span class="header-section-number">1.1</span> plumber</h2>
<p>Plumber is an R package that allows you to quickly generate an API (Application Programming Interface) from
your R code.</p>
</div>
<div id="sealr-1" class="section level2">
<h2><span class="header-section-number">1.2</span> sealr</h2>
<p>sealr aims to facilitate implementing authentication and authorization for plumber APIs.
Why would you need authentication or authorization for your API?
Two use cases that come to mind:</p>
<ul>
<li>you want to deploy your API at your company but do not want to give everyone access to every endpoint.</li>
<li>you want to make your API publicly available on the Internet but you still want users to authenticate before they can use your API (e.g. to prohibit abuse of your API).</li>
</ul>
<p>Those are just two scenarios that come to mind.</p>
</div>
<div id="using-plumber-filters-for-auth" class="section level2">
<h2><span class="header-section-number">1.3</span> Using plumber filters for auth</h2>
<p>The primary logic of <em>sealr</em> is based on plumber filters (although you can use sealr functionality
without filters as well by using the <code>is_authed</code> functions directly, see below).
“Plumber filters can be used to define a “pipeline” for handling incoming requests" (<a href="https://www.rplumber.io/docs/routing-and-input.html#filters">Plumber docs</a>).</p>
<p>So if your plumber API receives a request, the request will first be routed through the different filters before
it “arrives” at its destination endpoint.</p>
<p>The idea of <em>sealr</em> is to use a filter for authentication. If a request is not properly authenticated / authorized, <em>sealr</em> will immediately return a “401 - Authentication failed.” error from the filter to the user. In this way,
an unauthenticated / unauthorized request will not “reach” its destination endpoint.</p>
<div id="authenticate" class="section level3">
<h3><span class="header-section-number">1.3.1</span> authenticate</h3>
<p><em>sealr</em>’s main function is the <code>authenticate</code> function. It is supposed to be used within a plumber filter. <code>authenticate</code> takes a
<code>is_authed_*</code> function (see below) as input and depending on the output of this “checker” function,
takes action:</p>
<ul>
<li>if the request is authenticated / authorized, it forwards to the next plumber handler using <code>plumber::forward</code>.</li>
<li>if the request is not authenticated / authorized, it <code>return</code>s to the user, passing forward HTTP status code, description and message from the output of the <code>is_authed_</code> function. Most often, this will be a “401 - Authentication failed.” error.</li>
</ul>
<p>By accepting a function object as argument, <code>authenticate</code> is quite flexible: You can even pass your own <code>is_authed</code> function. See the examples section of <code>?sealr::authenticate</code> for a simple example.</p>
</div>
<div id="is_authed-functions" class="section level3">
<h3><span class="header-section-number">1.3.2</span> is_authed functions</h3>
<p>The functions starting with <code>is_authed</code> provide the actual implementations of the
different authentication / authorization strategies that <em>sealr</em> aims to provide.
Currently implemented are:</p>
<ul>
<li><code>is_authed_jwt</code>: implements JSON Web Token verification and checking.</li>
<li><code>is_authed_oauth2_google</code>: implements Google’s OpenID Connect (which is based on OAuth2.0)</li>
</ul>
<p><code>is_authed_*</code> functions return a list with the following elements:</p>
<ul>
<li><code>is_authed</code>: TRUE or FALSE. Result of the check whether the request is authenticated / authorized.</li>
<li><code>status</code>: character. Optional (typically only set if <code>is_authed</code> is FALSE). Short description of HTTP status code.</li>
<li><code>code</code>: integer. Optional (typically only set if <code>is_authed</code> is FALSE). HTTP status code.</li>
<li><code>message</code>: character. Optional (typically only set if <code>is_authed</code> is FALSE). Longer description.</li>
</ul>
<p>Usage of the <code>is_authed</code> functions is not restricted to plumber filters. For example,
you can use an <code>is_authed</code> function at the top of an endpoint to restrict access to certain endpoints or use
different authorization “levels” for different endpoints. This is particularly relevant if you have more than two “levels” of authorization (see the <a href="https://jandix.github.io/sealr/docs/jwt/jwt_claims_example/">claims example</a>).</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="02_auth_providers.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
